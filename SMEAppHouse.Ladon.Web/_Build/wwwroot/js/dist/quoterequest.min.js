function formatWithCommas(e){let t=e.value;t&&(t=t.replace(/,/g,""),t=parseFloat(t).toLocaleString("en-US"),e.value=t)}function removeCommas(e){var t=e.value;t&&(e.value=t.replace(/,/g,""))}let acceptFloatNumbersOnly=function(){var e;$(this).val($(this).val().replace(/[^0-9.]/g,"")),2<$(this).val().split(".").length&&(e=$(this).val().split("."),$(this).val(e[0]+"."+e.slice(1).join("")))};$.when($.ready).done(function(e){var t=!1,i={siteAddress:$("#SiteAddress").val(),siteCity:$("#SiteCity").val(),siteRegion:$("#SiteStateOrRegion").val(),siteCountry:$("#SiteCountry").val(),siteZipCode:$("#SiteZipCode").val()};$("#section-siteAddressSameAsResidential").hide(),$("main").addClass("parallax"),$("#get-quote").remove(),$("#desiredStartDate").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),$("#desiredEndDate").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),$("#SquareArea").on("input",acceptFloatNumbersOnly),$("#SpecificBudgetAmount").on("input",acceptFloatNumbersOnly),$("#MinimumBudgetAmount").on("input",acceptFloatNumbersOnly),$("#MaximumBudgetAmount").on("input",acceptFloatNumbersOnly),$("#ServiceCategory").on("change",function(){var e=$(this).val();let i=$("#ServiceCode");e?$.ajax({url:"/quoterequest",type:"get",data:{handler:"ServiceCodes",category:e},success:function(e){i.empty(),i.append($("<option>",{value:"",text:"Please select the type of service for this category"})),i.append($("<optgroup>",{label:"------------------------"}));var t=e.filter(e=>"other"!==e.description.toLowerCase()&&"others"!==e.description.toLowerCase()),t=($.each(t,function(e,t){i.append($("<option>",{value:t.value,text:t.description}))}),i.append($("<optgroup>",{label:"------------------------"})),e.filter(e=>"other"===e.description.toLowerCase()||"others"===e.description.toLowerCase())[0]);t?i.append($("<option>",{value:t.value,text:t.description})):i.append($("<option>",{value:e.length,text:"Other"}))},error:function(e,t,i){console.error("Error fetching service codes:",i)}}):i.empty()}),$('label[for="QuoteRequest_SiteAddressSameAsResidential"]').on("click",function(){var e=$("#SiteAddressSameAsResidential");e.prop("checked",!e.prop("checked")).trigger("change")}),$("#Address, #City, #Region, #Country, #ZipCode").on("input change",function(){var e=$("#Address").val().trim(),t=$("#City").val().trim(),i=$("#StateOrRegion").val().trim(),a=$("#CountryCode").val().trim(),o=$("#ZipCode").val().trim();e&&t&&i&&a&&o?$("#section-SiteAddressSameAsResidential").show():$("#section-siteAddressSameAsResidential").hide()}),$("#SiteAddress").on("input change",function(){t||(i.siteAddress=$("#SiteAddress").val())}),$("#SiteCity").on("input change",function(){t||(i.siteCity=$("#SiteCity").val())}),$("#SiteStateOrRegion").on("input change",function(){t||(i.siteRegion=$("#SiteRegion").val())}),$("#SiteCountryCode").on("input change",function(){t||(i.siteCountry=$("#SiteCountryCode").val())}),$("#SiteZipCode").on("input change",function(){t||(i.siteZipCode=$("#SiteZipCode").val())}),$("#SiteAddressSameAsResidential").on("change",function(){$(this).is(":checked")?(t=!0,$("#SiteAddress").val($("#Address").val()),$("#SiteCity").val($("#City").val()),$("#SiteStateOrRegion").val($("#StateOrRegion").val()),$("#SiteCountryCode").val($("#CountryCode").val()),$("#SiteZipCode").val($("#ZipCode").val()),t=!1):($("#SiteAddress").val(i.siteAddress),$("#SiteCity").val(i.siteCity),$("#SiteStateOrRegion").val(i.siteRegion),$("#SiteCountryCode").val(i.siteCountry),$("#SiteZipCode").val(i.siteZipCode))}),$("#quoterqst-messageOK").on("hidden.bs.modal",function(e){window.location.href="/"}),$("#SiteAddress, #DurationMonths").on("input",function(){var e=$(this).attr("id");$("#"+e+"-validation").text("")})}),$.when($.ready).done(function(e){$("#form-submit").on("click",function(e){e.preventDefault(),$("#quoteRequestForm").trigger("submit")}),$("#quoteRequestForm").on("submit",function(e){e.preventDefault();var e=new FormData(this),t=($("#loadingIndicator").show(),$('input[name="LADON-CSRF-FIELD"]').val());$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:e,contentType:!1,processData:!1,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(t){if(t.success)$("#quoterqst-messageOK").modal("show");else{let e=null;if(t.errors){$("[id$='-validation']").text("");var i,a,o,n="<ul>";for(i in t.errors)t.errors.hasOwnProperty(i)&&(a=t.errors[i],o=$(`[name="QuoteRequest.${i}"]`),$(`#${i}-validation`).length&&$(`#${i}-validation`).text(a),0<o.siblings(`#${i}-validation`).length&&o.siblings(`#${i}-validation`).text(a),!e)&&0<o.length&&(e=o);n.includes("<li>")&&($(".validation-summary-errors").html(n).show(),e=e||$(".validation-summary-errors")),e&&$("html, body").animate({scrollTop:e.offset().top-180},500)}}},complete:function(){$("#loadingIndicator").hide()}})})}),$.when($.ready).done(function(e){let i=[];function a(){$(".gallery-box-container").empty(),$.each(i,function(e,t){var i;t.type.match("image.*")?((i=new FileReader).onload=function(e){$(".gallery-box-container").append('<a href="" class="gallery-box"><span class="gallery-box__img-container"><img src="'+e.target.result+'" alt="'+t.name+'" class="gallery-box__img"></span><span class="gallery-box__text-wrapper"><span class="gallery-box__text gallery-box__filename"><marquee>'+t.name+'</marquee></span><span class="gallery-box__text" style="font-weight: bold;">'+(t.size/1024).toFixed(2)+" KB</span></span></a>")},i.readAsDataURL(t)):$(".gallery-box-container").append("<div><p>"+t.name+'</p><div class="file-info">'+t.name+" ("+(t.size/1024).toFixed(2)+' KB)</div><button class="remove-btn" data-index="'+e+'">&times;</button></div>')})}function o(){var e=i.map(e=>e.name).join(", ");$(".custom-file-label").text(e||"Choose files")}$("#browse-files").on("click",function(e){e.preventDefault(),$("#_attach-files").trigger("click")}),$("#_attach-files").on("change",function(e){i=Array.from(e.target.files),a(),o()}),$(document).on("click",".remove-btn",function(){var t,e=$(this).data("index");i.splice(e,1),a(),t=new DataTransfer,i.forEach(e=>{t.items.add(e)}),$("#files")[0].files=t.files,$("#files").trigger("change"),o()});var t=$('<div id="popup"></div>'),n=$("<img>");t.append(n),$("body").append(t),$(".gallery-box").on("click",function(e){e.preventDefault();e=$(".gallery-box .gallery-box__img").attr("href");n.attr("src",e),t.show()}),t.on("click",function(){t.hide()})});